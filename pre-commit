#!/bin/sh
echo "╔════════════════════════════════════════════════════════════════╗"
echo "║                              TEST                              ║"
echo "╚════════════════════════════════════════════════════════════════╝"
cargo test || { exit 1; }

echo "╔════════════════════════════════════════════════════════════════╗"
echo "║                             FORMAT                             ║"
echo "╚════════════════════════════════════════════════════════════════╝"
cargo fmt || { exit 1; }

echo "╔════════════════════════════════════════════════════════════════╗"
echo "║                              LINT                              ║"
echo "╚════════════════════════════════════════════════════════════════╝"
cargo clippy -- -D warnings || { exit 1; }

echo "╔════════════════════════════════════════════════════════════════╗"
echo "║                              DEMO                              ║"
echo "╚════════════════════════════════════════════════════════════════╝"
wasm-pack build --target web -d docs/demo/js || { exit 1; }
tsc -p docs/demo || { exit 1; }
rm docs/demo/js/.gitignore || { exit 1; }